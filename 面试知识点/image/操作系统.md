# 操作系统

## 进程和线程

进程是具有一定独立功能的程序，他是系统进行资源分配调度的一个独立单位，

线程是进程的一个实体，是cpu调度分派的基本单位，线程之间基本上不拥有系统资源

一个程序至少有一个进程，一个进程至少有一个线程，资源分配给进程，同一个进程下所有线程共享该进程的资源。



## 线程的哪些资源共享，哪些资源不共享

**共享的资源**

1. 堆 

   由于堆是在进程空间中开辟出来的，所以它是理所当然地被共享的；因此new出来的都是共享的（16位平台上分全局堆和局部堆，局部堆是独享的）。

2. 全局变量

   它是与具体某一函数无关的，所以也与特定线程无关；因此也是共享的

3. 静态变量

   虽然对于局部变量来说，它在代码中是“放”在某一函数中的，但是其存放位置和全局变量一样，存于堆中开辟的.bss和.data段，是共享的

4. 文件等公用资源  

   这个是共享的，使用这些公共资源的线程必须同步。Win32 提供了几种同步资源的方式，包括信号、临界区、事件和互斥体。

**独享的资源**

1. 栈 

   栈是独享的。

2. 寄存器 

   这个可能会误解，因为电脑的寄存器是物理的，每个线程去取值难道不一样吗？其实线程里存放的是副本，包括程序计数器PC。